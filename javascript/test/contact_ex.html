
<!DOCTYPE html>
<html>

<head>
    <title>Formulaire HTML avec des conditions de validation</title>
</head>

<body>
    <h1>Formulaire HTML avec des conditions de validation</h1>
    <form method="POST" action="traitement.php" onsubmit="return validerFormulaire();">
        <label for="societe">Société :</label>
        <input type="text" id="societe" name="societe"><br><br>

        <label for="personne">Personne à contacter :</label>
        <input type="text" id="personne" name="personne"><br><br>

        <label for="adrentr">Adresse de l'entreprise :</label>
        <textarea name="adrentr" id="adrentr" cols="50" rows="4"
            placeholder="veuillez entrer l'adresse de l'entreprise"></textarea><br><br>

        <label for="codepostal">Code postal :</label>
        <input type="text" id="codepostal" name="codepostal" pattern="[0-9]{5}"
            title="Le code postal doit comporter 5 chiffres."><br><br>

        <label for="ville">Ville :</label>
        <input type="text" id="ville" name="ville"><br><br>

        <label for="email">E-mail :</label>
        <input type="email" id="email" name="email" title="L'e-mail doit comporter au moins le caractère @."><br><br>

        <label for="tel">Téléphone :</label>
        <input type="tel" id="tel" name="tel" required><br><br>

        <label for="choix">
            <p>Séletionner l'environnement technique du projet:</p>
        </label>
        <textarea name="tech" id="tech" cols="50" rows="4"
            placeholder="Marquez ici l'environnement technique du projet"></textarea>
        <br>
        <select id="choix" name="choix" onchange="hideSelectedOption()">
            <option value="">Choississez</option>
            <option value="">Access</option>
            <option value="">Java</option>
            <option value="">Delphi</option>
            <option value="">Windev</option>
            <option value="">Visual Basic</option>
            <option value="">Power Builder</option>
            <option value="">Internet</option>
            <option value="">Intranet</option>
            <option value="">Windows NT</option>
            <option value="">Unix</option>
            <option value="">SQL Server</option>
            <option value="">Oracle</option>
            <option value="">Autres...</option>
        </select><br><br>

        <input type="submit" value="Envoyer">
        <button type="button" onclick="resetForm()">Effacer</button>
    </form>
    <script>
        function validerFormulaire() {
            var societe = document.getElementById("societe").value;
            var personne = document.getElementById("personne").value;
            var codepostal = document.getElementById("codepostal").value;
            var tel = document.getElementById("tel").value;
            var ville = document.getElementById("ville").value;
            var email = document.getElementById("email").value;
            var regexEmail = /\S+@\S+\.\S+/;

            

            if (societe.length < 1) {
                alert("La société doit comporter au moins 1 caractère.");
                return false;
            }

            if (personne.length < 1) {
                alert("La personne à contacter doit comporter au moins 1 caractère.");
                return false;
            }

            if (codepostal.length != 5) {
                alert("Le code postal doit comporter 5 caractères numériques.");
                return false;
            }

            if (ville.length < 1) {
                alert("La ville doit comporter au moins 1 caractère.");
                return false;
            }

            if (!regexEmail.test(email)) {
                alert("L'e-mail doit comporter au moins le caractère @.");
                return false;
            }

            if(tel.length != 10) {
                alert("Le numéro de téléphone doit comporter 10 caractère numérique");
                return false;
            }
            return true;
        }            

        function hideSelectedOption() {
            var selectBox = document.getElementById("choix");
            var selectedValue = selectBox.options[selectBox.selectedIndex].value;
            for (var i = 0; i < selectBox.options.length; i++) {
                if (selectBox.options[i].value === selectedValue) {
                    selectBox.remove(i);
                    break;
                }
            }
        }

        const form = document.querySelector('form');

      function resetForm() {
        form.reset(); // Réinitialise le formulaire
      }

      form.addEventListener('submit', (event) => {
        event.preventDefault(); // Empêche le formulaire de se soumettre normalement

        const societe = form.societe.value;
        const personne = form.personne.value;
        const codepostal= form.codepostal.value;
        const telephone= form.telephone.value;
        const ville= form.ville.value;
        const email=form.email.value;
        const regexEmail= form.regexEmail.value;
        resetForm(); // Réinitialise le formulaire après l'envoi
      });
    </script>
</body>

</html>